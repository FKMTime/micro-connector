{
    "dumpStateAfterTest": false,
    "groups": [
        {
            "groupId": "333-r1",
            "useInspection": true,
            "secondaryText": "3x3x3 - R1"
        },
        {
            "groupId": "333-bf",
            "useInspection": false,
            "secondaryText": "3x3x3 - BF"
        }
    ],
    "cards": {
        "69420": {
            "registrantId": 1,
            "name": "Filip Dziurka",
            "wcaId": "FILDZI01",
            "canCompete": true,
            "groups": ["333-r1"]
        },
        "3004425529": {
            "registrantId": 0,
            "name": "Filip Sciurka",
            "wcaId": "FILSCI01",
            "canCompete": true,
            "groups": ["333-bf"]
        },
        "1264825046": {
            "registrantId": 2,
            "name": "Multi Group",
            "wcaId": "FILSCI02",
            "canCompete": true,
            "groups": ["333-r1", "333-bf"]
        }
    },
    "buttons": {
        "penalty": 3,
        "inspect": 0,
        "delegate": 1,
        "submit": 2
    },
    "tests": [
        {
            "name": "Test group selection with multiple groups",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty", 
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "group_selected_idx == 1",
                        "time_confirmed == true"
                    ]
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test inspection cancel with long press",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "inspect",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Sleep",
                    "data": 1000
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "inspect",
                        "time": 1150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "inspection_time is none",
                        "solve_time is none"
                    ]
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test penalty wraparound",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "penalty == 0"
                    ]
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test DNF with long press penalty",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 1150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "penalty == -1"
                    ]
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": -1,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test delegate reset without card scan",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 3200,
                        "ack": false
                    }
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "delegate": true
                    }
                    
                },
                {
                    "type": "DelegateResolve",
                    "data": {
                        "shouldScanCards": false,
                        "penalty": null,
                        "value": null
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "current_competitor is none",
                        "current_judge is none",
                        "solve_time is none",
                        "penalty is none"
                    ]
                    
                }
            ]
        },
        {
            "name": "Test inspection before card scan",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "Button",
                    "data": {
                        "name": "inspect",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Sleep",
                    "data": 3000
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "inspection_time > 3000",
                        "time_confirmed == true"
                    ]
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test reset competitor with long press submit",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 3200
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "current_competitor is none",
                        "solve_time is none",
                        "penalty is none",
                        "time_confirmed == false"
                    ]
                    
                }
            ]
        },
        {
            "name": "Test delegate call before timer starts",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 3200,
                        "ack": false
                    }
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "delegate": true
                    }
                    
                },
                {
                    "type": "DelegateResolve",
                    "data": {
                        "shouldScanCards": true,
                        "penalty": 4,
                        "value": null
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 4,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test group selection wraparound",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty", 
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty", 
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "group_selected_idx == 0",
                        "possible_groups == 2"
                    ]
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test short delegate press ignored",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 2000,
                        "ack": false
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "solve_time is some",
                        "time_confirmed == false"
                    ]
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test delegate during running timer ignored",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 3200,
                        "ack": false
                    }
                    
                },
                {
                    "type": "Sleep",
                    "data": 1000
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "solve_time is some",
                        "time_confirmed == false"
                    ]
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 0,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test multiple group competitor scans after timer",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "inspect", 
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "submit",
                        "time": 150
                    }
                    
                },
                {
                    "type": "VerifySnapshot",
                    "data": [
                        "group_selected_idx == 0",
                        "penalty == 2"
                    ]
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 1264825046
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 2,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test inspection and delegate after timer",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "inspect",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Sleep",
                    "data": 3000
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 3200,
                        "ack": false
                    }
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "delegate": true
                    }
                    
                },
                {
                    "type": "DelegateResolve",
                    "data": {
                        "shouldScanCards": true,
                        "penalty": 6,
                        "value": 12345
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": 12345,
                        "penalty": 6,
                        "delegate": false
                    }
                    
                }
            ]
        },
        {
            "name": "Test penalty override by delegate",
            "sleepBetween": 500,
            "steps": [
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "SolveTime"
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "penalty",
                        "time": 150
                    }
                    
                },
                {
                    "type": "Button",
                    "data": {
                        "name": "delegate",
                        "time": 3200,
                        "ack": false
                    }
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "delegate": true
                    }
                    
                },
                {
                    "type": "DelegateResolve",
                    "data": {
                        "shouldScanCards": true,
                        "penalty": 10,
                        "value": null
                    }
                    
                },
                {
                    "type": "ScanCard",
                    "data": 69420
                    
                },
                {
                    "type": "ScanCard",
                    "data": 3004425529
                    
                },
                {
                    "type": "VerifySend",
                    "data": {
                        "time": -1,
                        "penalty": 10,
                        "delegate": false
                    }
                    
                }
            ]
        }
    ]
}
